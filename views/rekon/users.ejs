<%- include('../partials/_head.ejs') %>
<body>
    <%- include('../partials/_navbar.ejs') %>
    <div class="content">
        <div class="container">
            <!-- Container for the table to enable scrolling -->
            <div class="table-container">
                <h1>Welcome, <%= username %>!</h1>
                <table class="table table-striped table-hover">
                    <thead class="thead-dark sticky-header">
                        <tr>
                            <th scope="col">No</th>
                            <th scope="col">Incident</th>
                            <th scope="col">Customer</th>
                            <th scope="col">Layanan</th>
                            <th scope="col">Kategori</th>
                            <th scope="col">Regional</th>
                            <th scope="col">Witel</th>
                            <th scope="col">Jenis Permintaan</th>
                            <th scope="col">Reason</th>
                            <th scope="col">TTR E2E Awal</th>
                            <th scope="col">TTR After Reduksi</th>
                            <th scope="col">Eviden Regional</th>
                            <th scope="col">Catatan SDA</th>
                            <th scope="col">Validasi SDA</th>
                            <th scope="col">Approved Not PPQ</th>
                            <th scope="col">Rep/Rec</th>
                            <th scope="col">Change To</th>
                            <th scope="col">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% for(var i = 0; i < data.length; i++){ %>
                        <tr>
                            <th scope="row"><%= (i+1) %></th>
                            <td><%= data[i].incident %></td>
                            <td><%= data[i].customer %></td>
                            <td><%= data[i].layanan %></td>
                            <td><%= data[i].kategori %></td>
                            <td><%= data[i].regional %></td>
                            <td><%= data[i].witel %></td>
                            <td><%= data[i].jenis_permintaan %></td>
                            <td><%= data[i].reason %></td>
                            <td><%= data[i].ttr_e2e_awal %></td>
                            <td><%= data[i].ttr_after_reduksi %></td>
                            <td><%= data[i].eviden_regional %></td>
                            <td><%= data[i].catatan_sda %></td>
                            <td><%= data[i].validasi_sda %></td>
                            <td><%= data[i].approved_not_ppq %></td>
                            <td><%= data[i].rep_rec %></td>
                            <td><%= data[i].change_to %></td>
                            <td><%= data[i].level_acc %></td>
                        </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <%- include('../partials/_foot.ejs') %>

    <!-- Inline CSS -->
    <style>
        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .sticky-header th {
            position: -webkit-sticky; /* For Safari */
            position: sticky;
            top: 0;
            background-color: #343a40; /* Same color as thead-dark */
            color: white;
            z-index: 10; /* Ensures the header is above other content */
        }
    </style>
</body>
